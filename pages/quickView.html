<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KT8 Store - Product</title>
    <script>
        // Cargar el tema correcto antes de que se muestre la página
        const isDarkMode = localStorage.getItem('darkMode') === 'true';
        const themeLink = document.createElement('link');
        themeLink.rel = 'stylesheet';
        themeLink.id = 'theme-style';
        themeLink.href = isDarkMode ? '../styles/darkMode.css' : '../styles/lightMode.css';
        document.head.appendChild(themeLink);

        // Cargar el CSS de quickView según el tema
        const quickViewLink = document.createElement('link');
        quickViewLink.rel = 'stylesheet';
        quickViewLink.href = isDarkMode ? '../styles/whiteQuickView.css' : '../styles/darkQuickView.css';
        document.head.appendChild(quickViewLink);

        // Agregar clase dark-mode al body si está en modo oscuro
        if (isDarkMode) {
            document.body.classList.add('dark-mode');
        } else {
            document.body.classList.add('light-mode');
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

</head>

<body>
    <div class="container">
        <!-- Navbar -->
        <nav class="navbar">
            <div class="logo-section">
                <img src="../assets/zomboyImg/zomboyLogo_1.png" alt="Zomboy Logo" class="logo" id="logo-img">
            </div>

            <div class="nav-links">
                <a href="../index.html">
                    HOME
                    <div class="nav-indicator"></div>
                </a>
                <a href="apparel.html" class="active">
                    APPAREL
                    <div class="nav-indicator"></div>
                </a>
                <a href="accesories.html">
                    ACCESORIES
                    <div class="nav-indicator"></div>
                </a>
                <a href="sale.html">
                    COMING SOON
                </a>
                <a href="giftCard.html">
                    GIFTCARD
                    <div class="nav-indicator"></div>
                </a>
            </div>
            <div class="nav-right">
                <div class="currency-selector">
                    <select id="currency-select">
                        <option value="USD">USD $</option><i class="fas fa-chevron-down"></i>
                        <option value="EUR">EUR €</option><i class="fas fa-chevron-down"></i>
                        <option value="MXN">MXN $</option><i class="fas fa-chevron-down"></i>
                        <option value="ARS">ARS $</option><i class="fas fa-chevron-down"></i>
                        <option value="GBP">GBP £</option><i class="fas fa-chevron-down"></i>
                        <option value="JPY">JPY ¥</option><i class="fas fa-chevron-down"></i>
                    </select>
                </div>
                <button class="join-btn">JOIN US!</button>
                <div class="cart-icon">
                    <i class="fas fa-shopping-cart"></i>
                </div>
            </div>
        </nav>

        <!-- Contenido del Producto -->
        <div class="product-container">
            <div class="product-image">
                <img src="" alt="Zomboy Vintage Punk Hoodie" id="product-img">
            </div>
            <div class="product-info">
                <h1 class="product-title" id="product-title"></h1>
                <div class="product-price price-text" id="product-price"></div>

                <div class="size-grid">
                    <button class="size-button">SMALL</button>
                    <button class="size-button">MEDIUM</button>
                    <button class="size-button">LARGE</button>
                    <button class="size-button">X-LARGE</button>
                    <button class="size-button">XX-LARGE</button>
                    <button class="size-button">XXX-LARGE</button>
                </div>

                <div class="quantity-label">QUANTITY</div>
                <div class="quantity-selector">
                    <button class="quantity-button minus">-</button>
                    <span class="quantity-display">1</span>
                    <button class="quantity-button plus">+</button>
                </div>

                <button class="add-to-cart">ADD TO CART</button>
                <button class="buy-now">Buy now with ShopPay</button>
                <div class="more-options">More payment options</div>

                <div class="details">
                    <h3>DETAILS</h3>
                    <ul id="product-descriptions">
                        <!-- Las descripciones se cargarán dinámicamente aquí -->
                    </ul>
                </div>

                <!-- Sección de productos sugeridos debajo de la imagen -->
                <div class="suggested-section">
                    <h2 class="suggested-title">YOU MAY ALSO LIKE</h2>
                    <div class="suggested-products">
                        <div class="suggested-product" onclick="openQuickView('../assets/accesoriesImg/hatZ.png', 'ZOMBUCKET HAT - NEON', '$45.00 USD')">
                            <img src="../assets/accesoriesImg/hatZ.png" alt="ZOMBUCKET HAT - NEON" class="suggested-img">
                            <div class="suggested-info">
                                <div class="suggested-name">ZOMBUCKET HAT - NEON</div>
                                <div class="suggested-price">$45.00 USD</div>
                            </div>
                        </div>
                        <div class="suggested-product" onclick="openQuickView('../assets/apparelImg/jerseyZ.png', 'ZOMBOY KIDS CHROME JERSEY', '$90.00 USD')">
                            <img src="../assets/apparelImg/jerseyZ.png" alt="ZOMBOY KIDS CHROME JERSEY" class="suggested-img">
                            <div class="suggested-info">
                                <div class="suggested-name">ZOMBOY KIDS CHROME JERSEY</div>
                                <div class="suggested-price">$90.00 USD</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Cargar la información del producto desde localStorage
        document.addEventListener('DOMContentLoaded', function () {
            const productImage = document.getElementById('product-img');
            const productTitle = document.getElementById('product-title');
            const productPrice = document.getElementById('product-price');
            const logoImg = document.getElementById('logo-img');
            const productDescriptions = document.getElementById('product-descriptions');

            // Obtener la información del producto desde localStorage
            const imageSrc = localStorage.getItem('quickViewImage');
            const title = localStorage.getItem('quickViewTitle');
            const price = localStorage.getItem('quickViewPrice');
            const desc1 = localStorage.getItem('quickViewDesc1');
            const desc2 = localStorage.getItem('quickViewDesc2');
            const desc3 = localStorage.getItem('quickViewDesc3');

            // Actualizar el ícono del botón según el tema
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            
            // Limpiar las descripciones anteriores
            productDescriptions.innerHTML = '';

            // Agregar las nuevas descripciones si existen
            if (desc1) {
                const li1 = document.createElement('li');
                li1.textContent = desc1;
                productDescriptions.appendChild(li1);
            }
            if (desc2) {
                const li2 = document.createElement('li');
                li2.textContent = desc2;
                productDescriptions.appendChild(li2);
            }
            if (desc3) {
                const li3 = document.createElement('li');
                li3.textContent = desc3;
                productDescriptions.appendChild(li3);
            }

            // Actualizar la información del producto
            if (imageSrc) {
                // Ajustar la ruta de la imagen si es necesario
                let rutaImagen = imageSrc;
                
                // Si la ruta ya incluye 'assets/', no necesitamos hacer más ajustes
                if (!rutaImagen.includes('assets/')) {
                    // Extraer el nombre del archivo
                    const fileName = rutaImagen.split('/').pop();
                    
                    // Determinar la carpeta según el nombre del archivo
                    if (fileName.startsWith('Z')) {
                        rutaImagen = '../assets/apparelImg/' + fileName;
                    } else if (fileName.startsWith('Z1')) {
                        rutaImagen = '../assets/accesoriesImg/' + fileName;
                    } else if (fileName.startsWith('S')) {
                        rutaImagen = '../assets/saleImg/' + fileName;
                    } else if (fileName.includes('giftCard')) {
                        rutaImagen = '../assets/giftCard/' + fileName;
                    } else {
                        rutaImagen = '../assets/apparelImg/' + fileName;
                    }
                }
                
                productImage.src = rutaImagen;
                productImage.alt = title || 'Producto';
                
                // Mostrar mensaje en consola para depuración
                console.log('Ruta de imagen final:', rutaImagen);
            }

            if (title) {
                productTitle.textContent = title;
                // Actualizar el título de la página
                document.title = 'KT8 Store - ' + title;
            }

            if (price) {
                productPrice.textContent = price;
                // Guardar el precio original para la conversión de moneda
                productPrice.setAttribute('data-original-price', price.replace(/[^0-9.]/g, ''));
            }

            // Actualizar el logo según el tema
            if (isDarkMode) {
                logoImg.src = '../assets/zomboyImg/zomboyLogo_2.png';
            }

            // Mostrar mensaje en consola para depuración
            console.log('Producto cargado:', { imageSrc, title, price });
        });

        // Funcionalidad para los botones de cantidad
        const quantityDisplay = document.querySelector('.quantity-display');
        let quantity = 1;

        document.querySelector('.minus').addEventListener('click', () => {
            if (quantity > 1) {
                quantity--;
                quantityDisplay.textContent = quantity;
            }
        });

        document.querySelector('.plus').addEventListener('click', () => {
            quantity++;
            quantityDisplay.textContent = quantity;
        });

        // Funcionalidad para los botones de talla
        document.querySelectorAll('.size-button').forEach(button => {
            button.addEventListener('click', function () {
                // Guardar la talla seleccionada en localStorage
                localStorage.setItem('selectedSize', this.textContent);
                
                // Recargar la página
                window.location.reload();
            });
        });

        // Al cargar la página, marcar la talla seleccionada si existe
        document.addEventListener('DOMContentLoaded', function() {
            const selectedSize = localStorage.getItem('selectedSize');
            if (selectedSize) {
                document.querySelectorAll('.size-button').forEach(button => {
                    if (button.textContent === selectedSize) {
                        button.classList.add('active');
                    }
                });
            }
        });

        // Funcionalidad para el botón de cerrar
        document.querySelector('.quickview-close')?.addEventListener('click', () => {
            window.close();
        });
    </script>
    <script src="../scripts/currency.js"></script>
    <footer class="footer">
        <div class="footer-text">© 2025, KT8 Merch Co All rights reserved.</div>
        <div class="payment-methods">
            <i class="fab fa-cc-visa"></i>
            <i class="fab fa-cc-mastercard"></i>
            <i class="fab fa-cc-amex"></i>
            <i class="fab fa-cc-paypal"></i>
            <i class="fab fa-cc-apple-pay"></i>
        </div>
    </footer>

</body>

</html>